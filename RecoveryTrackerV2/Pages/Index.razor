@page "/"

<PageTitle>DaysSince</PageTitle>
<br />
<MudPaper Class="pa-10 ma-2 cyan darken4 text-white" Style="background-color: #033E50" Elevation="3">
    <MudText Typo="Typo.h4" Align="Align.Center">@timeMessage</MudText>
    <MudText Typo="Typo.h5" Align="Align.Center">Since major outage!</MudText>
</MudPaper>
<br />

    <MudContainer>
        @if (anyIssues == false)
        {
        <MudAlert Severity="Severity.Success" Variant="Variant.Filled" Dense="true">All systems are up and running!</MudAlert>
        <br />
        <MudSimpleTable Hover="true" FixedHeader="true" Striped="true">
            <thead>
                <tr>
                    <th><b>System</b></th>
                    <th><b>Status</b></th>
                </tr>
            </thead>
            <tbody>
                    <tr>
                        <td>F&O</td>
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true" Style="max-width: 214px;"> Running</MudAlert></td>
                    </tr>
                    <tr>
                        <td>CE</td>
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true" Style="max-width: 214px;">Running</MudAlert></td>
                    </tr>
                    <tr>
                        <td>BizTalk</td>
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true" Style="max-width: 214px;">Running</MudAlert></td>
                    </tr>
                    <tr>
                        <td>ECM</td>
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true" Style="max-width: 214px;">Running</MudAlert></td>
                    </tr>
                    <tr>
                        <td>SPO</td>
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true" Style="max-width: 214px;">Running</MudAlert></td>
                    </tr>
            </tbody>
            </MudSimpleTable>
        }
        else if (anyIssues == true)
        {        
            <MudSimpleTable Hover="true" FixedHeader="true" Striped="true">
            <thead>
                <tr>
                    <th><b>System</b></th>
                    <th><b>Status</b></th>
                    <th><b>Issue reported</b></th>
                    <th><b>Reported issues</b></th>
                </tr>
            </thead>
            <tbody>
                    <tr>
                        <td>F&O</td>
                            @if (appState.ERPState == "Down")
                            { 
                                <td><MudAlert Severity="Severity.Error" Variant="Variant.Outlined" Dense="true">Down</MudAlert></td>
                            }
                            else if(appState.ERPState == "Degraded")
                            {
                                <td><MudAlert Severity="Severity.Warning" Variant="Variant.Outlined" Dense="true">Degraded</MudAlert></td>
                            }
                            else
                            {
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true">Running</MudAlert></td>
                            }
                        <td>@{var timeStateERP = @appState.ERPDate.HasValue ? @appState.ERPDate.Value.ToString("dd/MM/yyy") : "";} @timeStateERP</td>
                        <td>@appState.ERPIssues</td>
                    </tr>
                    <tr>
                        <td>CE</td>
                            @if (appState.CEState == "Down")
                            { 
                                <td><MudAlert Severity="Severity.Error" Variant="Variant.Outlined" Dense="true">Down</MudAlert></td>
                            }
                            else if(appState.CEState == "Degraded")
                            {
                                <td><MudAlert Severity="Severity.Warning" Variant="Variant.Outlined" Dense="true">Degraded</MudAlert></td>
                            }
                            else
                            {
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true">Running</MudAlert></td>
                            }
                        <td>@{var timeStateCE = @appState.CEDate.HasValue ? @appState.CEDate.Value.ToString("dd/MM/yyy") : "";} @timeStateCE</td>
                        <td>@appState.CEIssues</td>
                    </tr>
                    <tr>
                        <td>BizTalk</td>
                            @if (appState.BizState == "Down")
                            { 
                                <td><MudAlert Severity="Severity.Error" Variant="Variant.Outlined" Dense="true">Down</MudAlert></td>
                            }
                            else if(appState.BizState == "Degraded")
                            {
                                <td><MudAlert Severity="Severity.Warning" Variant="Variant.Outlined" Dense="true">Degraded</MudAlert></td>
                            }
                            else
                            {
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true">Running</MudAlert></td>
                            }
                        <td>@{var timeStateBiz = @appState.BizDate.HasValue ? @appState.BizDate.Value.ToString("dd/MM/yyy") : "";} @timeStateBiz</td>
                        <td>@appState.BizIssues</td>
                    </tr>
                    <tr>
                        <td>ECM</td>
                            @if (appState.ECMState == "Down")
                            { 
                                <td><MudAlert Severity="Severity.Error" Variant="Variant.Outlined" Dense="true">Down</MudAlert></td>
                            }
                            else if(appState.ECMState == "Degraded")
                            {
                                <td><MudAlert Severity="Severity.Warning" Variant="Variant.Outlined" Dense="true">Degraded</MudAlert></td>
                            }
                            else
                            {
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true">Running</MudAlert></td>
                            }
                        <td>@{var timeStateECM = @appState.ECMDate.HasValue ? @appState.ECMDate.Value.ToString("dd/MM/yyy") : "";} @timeStateECM</td>
                        <td>@appState.ECMIssues</td>
                    </tr>
                    <tr>
                        <td>SPO</td>
                            @if (appState.SPOState == "Down")
                            { 
                                <td><MudAlert Severity="Severity.Error" Variant="Variant.Outlined" Dense="true">Down</MudAlert></td>
                            }
                            else if(appState.SPOState == "Degraded")
                            {
                                <td><MudAlert Severity="Severity.Warning" Variant="Variant.Outlined" Dense="true">Degraded</MudAlert></td>
                            }
                            else
                            {
                                <td><MudAlert Severity="Severity.Success" Variant="Variant.Outlined" Dense="true">Running</MudAlert></td>
                            }
                        <td>@{var timeStateSPO = @appState.SPODate.HasValue ? @appState.SPODate.Value.ToString("dd/MM/yyy") : "";} @timeStateSPO</td>
                        <td>@appState.SPOIssues</td>
                    </tr>
            </tbody>
        </MudSimpleTable>
        }
    </MudContainer>



